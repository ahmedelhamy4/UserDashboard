<h2>Users</h2>
<p-table [value]="users">
  <ng-template pTemplate="header">
    <tr>
      <th>Email</th>
      <th>Role</th>
      <th>Edit</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-user>
    <tr>
      <td>{{ user.email }}</td>
      <td>{{ user.role }}</td>
      <td>
        <button
          pButton
          icon="pi pi-pencil"
          (click)="openEditDialog(user)"
        ></button>
      </td>
      <!-- <td *ngIf="isAdmin">
      <button pButton icon="pi pi-pencil" (click)="openEditDialog(user)"></button>
    </td> -->
    </tr>
  </ng-template>
</p-table>

<p-dialog
  header="Edit User"
  [(visible)]="editDialogVisible"
  [modal]="true"
  [closable]="true"
  [dismissableMask]="true"
  [style]="{ width: '350px' }"
>
  <form *ngIf="selectedUser" [formGroup]="editForm" (ngSubmit)="onEditSubmit()">
    <div class="flex flex-col gap-2">
      <label for="editEmail">Email</label>
      <input pInputText id="editEmail" type="email" formControlName="email" />
    </div>
    <div class="flex flex-col gap-2">
      <label for="editRole">Role</label>
      <select id="editRole" formControlName="role" pInputText>
        <option value="admin">admin</option>
        <option value="user">user</option>
      </select>
    </div>
    <div class="flex flex-row gap-2 mt-3">
      <button
        pButton
        type="submit"
        label="Save"
        [disabled]="editForm.invalid"
      ></button>
      <button
        pButton
        type="button"
        label="Cancel"
        class="p-button-secondary"
        (click)="editDialogVisible = false"
      ></button>
    </div>
  </form>
</p-dialog>
